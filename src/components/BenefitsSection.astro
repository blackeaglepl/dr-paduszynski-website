---
// Sekcja: Zalety osteopatii (3 kolumny z ikonami, nagłówkami i opisami)
import icon1 from '../assets/ikona1.svg';
import icon2 from '../assets/ikona2.svg';
import icon3 from '../assets/ikona3.svg';
import { getLocaleFromUrl, getTranslations, type Locale } from "../utils/i18n";

interface BenefitItem {
  icon: { src: string };
  title: string;
  description: string;
}

interface BenefitsProps {
  heading?: string;
  headingTag?: string;
  items?: BenefitItem[];
}

const currentLocale = getLocaleFromUrl(Astro.url) as Locale;
const t = getTranslations(currentLocale);

// Tłumaczenia korzyści
const translations = {
  pl: {
    heading: { strong: 'Korzyści', light: 'osteopatii' },
    items: [
      {
        icon: icon1,
        title: 'Życie bez bólu',
        description: 'Osteopatia eliminuje źródło bólu poprzez przywrócenie naturalnej równowagi ciała, bez leków i inwazyjnych zabiegów.',
      },
      {
        icon: icon2,
        title: 'Swoboda ruchu',
        description: 'Delikatne techniki osteopatyczne uwalniają napięcia i blokady, przywracając pełną sprawność ruchową.',
      },
      {
        icon: icon3,
        title: 'Naturalna regeneracja',
        description: 'Osteopata aktywuje naturalne mechanizmy samouzdrawiania organizmu, wspierając długotrwałą poprawę zdrowia.',
      },
    ]
  },
  en: {
    heading: { strong: 'Benefits', light: 'of osteopathy' },
    items: [
      {
        icon: icon1,
        title: 'Life without pain',
        description: 'Osteopathy eliminates the source of pain by restoring the body\'s natural balance, without drugs and invasive procedures.',
      },
      {
        icon: icon2,
        title: 'Freedom of movement',
        description: 'Gentle osteopathic techniques release tensions and blockages, restoring full mobility.',
      },
      {
        icon: icon3,
        title: 'Natural regeneration',
        description: 'An osteopath activates the body\'s natural self-healing mechanisms, supporting long-term health improvement.',
      },
    ]
  }
} as const;

const content = translations[currentLocale];

// Nagłówek sekcji (h2 domyślnie, można nadpisać przez props)
// Jeśli chcesz użyć innego poziomu nagłówka (np. h3), przekaż przez props: headingTag: 'h3'
const {
  // Nagłówek z pogrubionym słowem "Zalety" (font-semibold)
  heading,
  headingTag = 'h2', // domyślnie h2, można ustawić np. 'h3'
  items = content.items,
}: BenefitsProps = Astro.props;
---

<section class="py-12 md:pt-4 md:pb-28">
  <div class="container mx-auto px-4 md:px-6 max-w-6xl">
    <div class="text-center max-w-2xl mx-auto">
      <h2 class="font-heading text-medical-text text-h2-mobile md:text-h2-desktop tracking-tight transition-colors duration-400 hover:text-medical-primary">
        {heading ? heading : <> <span class="font-semibold">{content.heading.strong}</span> <span class="font-light">{content.heading.light}</span></>}
      </h2>
      <p class="sr-only">{currentLocale === 'pl' ? 'Trzy kluczowe powody, dla których pacjenci wybierają osteopatię.' : 'Three key reasons why patients choose osteopathy.'}</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-10 md:gap-14 mt-10 md:mt-14">
      {items.map((item) => (
        <article class="text-center group" data-animated-benefit>
          <div class="flex items-center justify-center">
            <img src={item.icon.src} width="64" height="64" alt="" aria-hidden="true" class="h-14 w-14 md:h-16 md:w-16 transform transition-transform duration-200 ease-out group-hover:scale-[1.32]" />
          </div>
          <h3 class="font-heading text-medical-text text-h3-mobile md:text-h3-desktop mt-5">
            {item.title}
          </h3>
          <p class="text-medical-text-light text-body-mobile md:text-body-desktop mt-3 max-w-sm mx-auto">
            {item.description}
          </p>
        </article>
      ))}
    </div>
  </div>
  <script>
    // Delikatne wejście elementów przy przewinięciu (z poszanowaniem prefers-reduced-motion)
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (!prefersReducedMotion) {
      const observer = new IntersectionObserver((entries) => {
        for (const entry of entries) {
          if (entry.isIntersecting) {
            entry.target.classList.add('opacity-100', 'translate-y-0');
            observer.unobserve(entry.target);
          }
        }
      }, { threshold: 0.25 });

      document.querySelectorAll('[data-animated-benefit]').forEach((el) => {
        el.classList.add('opacity-0', 'translate-y-1', 'transition-all', 'duration-500');
        observer.observe(el);
      });
    }
  </script>
</section>


