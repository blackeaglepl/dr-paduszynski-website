
---
// Komponent mapy Google dla strony kontakt - sekcja lokalizacji
import { getLocaleFromUrl, getTranslations, type Locale } from '../utils/i18n';

const currentLocale = getLocaleFromUrl(Astro.url) as Locale;
const t = getTranslations(currentLocale);

const googleMapsApiKey = import.meta.env.PUBLIC_GOOGLE_MAPS_API_KEY;

// Tłumaczenia dla komponentu mapy
const translations = {
  pl: {
    heading: 'Lokalizacja gabinetu',
    description: 'Klinika Osteopatii dr Jarema Paduszyński znajduje się na I piętrze budynku przy ul. Jugowickiej 35/5.',
    openInMaps: 'Otwórz w Google Maps →'
  },
  en: {
    heading: 'Clinic location', 
    description: 'The Osteopathy Clinic dr Jarema Paduszyński is located on the first floor of the building at 35/5 Jugowicka Street.',
    openInMaps: 'Open in Google Maps →'
  }
} as const;

const content = translations[currentLocale];

// URL do Google Maps Embed - najprostsze rozwiązanie
const embedUrl = `https://www.google.com/maps/embed/v1/place?key=${googleMapsApiKey}&q=Klinika+Osteopatii+dr+Jarema+Paduszyński,Jugowicka+35,Kraków,Poland`;
---

<!-- Sekcja z mapą lokalizacji gabinetu -->
<section class="py-16 md:py-24 bg-medical-white">
  <div class="container mx-auto px-4 md:px-6 max-w-7xl">
    <div class="text-center mb-12">
      <h2 class="text-h2-mobile md:text-h2-desktop font-heading font-semibold text-medical-text mb-4">
        {content.heading}
      </h2>
      <p class="text-body-mobile md:text-body-desktop text-medical-text-light max-w-2xl mx-auto">
        {content.description}
      </p>
    </div>

    <!-- Mapa Google - najprostsze rozwiązanie z Embed API -->
    <div class="bg-medical-white rounded-lg shadow-sm border border-medical-bg overflow-hidden">
      <div class="relative w-full" style="height: 500px;">
        {googleMapsApiKey ? (
          <iframe 
            src={embedUrl}
            width="100%" 
            height="500" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade"
            class="rounded-lg"
            title="Lokalizacja Kliniki Osteopatii dr Jarema Paduszyński"
          ></iframe>
        ) : (
          <div class="absolute inset-0 bg-medical-bg flex items-center justify-center">
            <div class="text-center p-6">
              <div class="w-12 h-12 text-medical-text-light mx-auto mb-4">
                <svg viewBox="0 0 24 24" fill="currentColor" class="w-12 h-12">
                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
              </div>
              <p class="text-body-mobile text-medical-text mb-2">Mapa Google niedostępna</p>
              <p class="text-small-mobile text-medical-text-light mb-4">
                ul. Jugowicka 35/5, 30-443 Kraków
              </p>
              <a 
                href="https://www.google.com/maps/dir//Klinika+Osteopatii+dr+Jarema+Paduszy%C5%84ski,+Jugowicka,+Krak%C3%B3w/@50.0076712,19.8927667,19603m/data=!3m1!1e3!4m9!4m8!1m0!1m5!1m1!1s0x47165d0d3a2c5865:0x5de3b34d2586f8e2!2m2!1d19.9339658!2d50.0076785!3e0?hl=pl&entry=ttu&g_ep=EgoyMDI1MDgxMy4wIKXMDSoASAFQAw%3D%3D" 
                target="_blank"
                rel="noopener noreferrer"
                class="text-medical-primary hover:text-medical-light font-medium"
              >
                {content.openInMaps}
              </a>
            </div>
          </div>
        )}
      </div>
    </div>
  </div>
</section>

