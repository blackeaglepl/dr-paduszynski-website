---
import { getLocaleFromUrl, getTranslations, getSwitchLanguageUrl, type Locale } from "../utils/i18n";

const currentLocale = getLocaleFromUrl(Astro.url) as Locale;
const t = getTranslations(currentLocale);
const targetLocale = currentLocale === "pl" ? "en" : "pl";
const switchUrl = getSwitchLanguageUrl(Astro.url, targetLocale);
---

<a 
  href={switchUrl}
  class="bg-medical-primary hover:bg-medical-light text-white font-heading font-semibold px-3.5 py-1.5 rounded-full transition-colors duration-200 focus:ring-2 focus:ring-medical-primary/50 focus:outline-none text-sm shadow-sm"
  aria-label={`Przełącz na język ${targetLocale === 'en' ? 'angielski' : 'polski'}`}
>
  {t.language.current}
</a>